[db_source]
user = postgres
pass = z
host = 127.0.0.1
port = 5432
name = dataset

[db_target]
user = postgres
pass = z
host = 127.0.0.1
port = 5432
name = anomaly

[source]
schema = public
table  = loto_base
where_sql =

[output]
schema = public
table  = sktime
failures_table = sktime_failures
if_exists = replace
chunksize = 50000
flush_every = 1

; 追加：保存形式
; full   : 既存のメタ情報も保存（衝突しうるので、JOIN時に列選択推奨）
; minimal: JOIN 用に必要な列 + 特徴量列のみ（おすすめ）
save_mode = minimal

; 追加：特徴量列の接頭辞テンプレ
; {library} が "sktime" に置換されます
feature_prefix_template = hist_{library}_

; 追加：接頭辞を付ける“特徴量として使う列”
feature_cols = y_hat,y_lo,y_hi,is_anomaly,anomaly_side,anomaly_score

; 追加：minimal時に run_id/created_ts も接頭辞を付けるか
prefix_run_metadata = true

[run]
min_len = 20
series_limit = 0
max_workers = 4
threads_per_worker = 1
fail_fast = false
save_failures = true
save_only_anomalies = false

[models]
enabled = STRAY,SubLOF

[model.STRAY]
k = 10
alpha = 0.01

[model.SubLOF]
n_neighbors = 80
window_size = 400
auto_tune_neighbors = true
jitter_eps = 1e-9
